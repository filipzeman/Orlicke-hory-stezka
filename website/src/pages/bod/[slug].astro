---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { points } from "../../data/mockPoints";
import Icon from "../../components/Icon.astro";

export async function getStaticPaths() {
    return points.map((point) => ({
        params: { slug: point.slug },
    }));
}

const { slug } = Astro.params;
const point = points.find((p) => p.slug === slug);

if (!point) {
    throw new Error("Point not found");
}
---

<BaseLayout title={`${point.name} | Orlické hory`}>
    <section class="container">
        <h1>{point.name}</h1>

        <div class="meta">
            km {point.km} • {point.elevation} m
        </div>

        <p class="intro">
            {point.shortDescription}
        </p>
    </section>

    <section class="container details">
        <div class="info-block">
            <h2>Služby</h2>

            <ul>
                {
                    point.sleeping.length > 0 && (
                        <li>
                            <Icon name="Bed" /> Spaní:{" "}
                            {point.sleeping.join(", ")}
                        </li>
                    )
                }

                {
                    point.food.length > 0 && (
                        <li>
                            <Icon name="Utensils" /> Jídlo:{" "}
                            {point.food.join(", ")}
                        </li>
                    )
                }

                {
                    point.water && (
                        <li>
                            <Icon name="Droplets" /> Zdroj vody dostupný
                        </li>
                    )
                }
            </ul>
        </div>
    </section>
</BaseLayout>

<style>
    .meta {
        font-size: 0.9rem;
        opacity: 0.7;
        margin-bottom: 1rem;
    }

    .intro {
        font-size: 1.1rem;
        max-width: 700px;
    }

    .details {
        margin-top: 1rem;
    }

    li {
        display: flex;
        align-items: center;
    }
</style>
